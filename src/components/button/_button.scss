// Variables
$great-button-shadow-size: 3px;
$great-button-padding: 13px 20px 12px;
$great-button-inline-padding: 8px 15px 7px;
$great-button-icon-padding: 8px 10px 7px;
$great-button-font-size: 20px;
$great-button-line-height: 1.3;
$great-button-box-sizing: border-box;
$great-button-display: inline-block;
$great-button-position: relative;
$great-button-width: 100%;
$great-button-margin: 0 0 20px;
$great-button-border-width: 1px;
$great-button-border-radius: 0;
$great-button-text-align: center;
$great-button-vertical-align: top;
$great-button-cursor: pointer;
$great-button-appearance: none;
$great-button-outline: 2px solid transparent;

// Placeholder for base button styles
%great-button-base {
    font-family: $great-type-family-great-bold;
    font-size: $great-button-font-size;
    box-sizing: $great-button-box-sizing;
    display: $great-button-display;
    position: $great-button-position;
    width: $great-button-width;
    margin: $great-button-margin;
    border: $great-button-border-width solid rgba(0, 0, 0, 0);
    border-bottom: none;
    border-radius: $great-button-border-radius;
    text-align: $great-button-text-align;
    text-decoration: none;
    vertical-align: $great-button-vertical-align;
    cursor: $great-button-cursor;
    -webkit-appearance: $great-button-appearance;
    padding: $great-button-padding;
    line-height: $great-button-line-height;
    -webkit-font-smoothing: auto;
    outline: $great-button-outline;
    display: inline-flex;
    align-items: center;
    justify-content: center;

    .great-icon--svg {
        vertical-align: middle;
        flex-shrink: 0;
        align-self: center;
    }

    @include govuk-media-query($from: tablet) {
        width: auto;
    }

    &::before {
        content: "";
        display: block;
        position: absolute;
        top: -2px;
        right: -2px;
        bottom: -4px;
        left: -2px;
        background: rgba(0, 0, 0, 0);
    }
}

// Mixin for button states
@mixin great-button-states($bg-color, $bg-hover, $text-color, $border, $border-hover, $has-border: false, $has-small-shadow: false) {
    background-color: $bg-color;
    color: $text-color;
    box-shadow: 0 $great-button-shadow-size 0 $border;

    @if $has-border {
        border: $great-button-border-width solid $border;
        border-bottom: none;
    }

    @if $has-small-shadow {
        box-shadow: 0 1px 0 $border;
    }

    &:hover,
    &:focus:hover,
    &:active:not(:focus) {
        color: $text-color;
        background-color: $bg-hover;
        box-shadow: 0 $great-button-shadow-size 0 $border-hover;

        @if $has-border {
            color: $border-hover;
            border: $great-button-border-width solid $border-hover;
            border-bottom: none;
        }

        @if $has-small-shadow {
            box-shadow: 0 1px 0 $border;
        }
    }

    &:active:not(:focus) {
        border: $great-button-border-width solid $border-hover;
        box-shadow: none;
    }

    &:focus:not(:hover) {
        outline: $great-button-outline;
        color: $great-semantic-text-focus-button-label-focus;
    }

    &:focus:not(:active):not(:hover) {
        background-color: $great-semantic-interaction-focus;
        border: $great-button-border-width solid $great-semantic-border-focus-button-border;
        border-bottom: none;
        box-shadow: 0 $great-button-shadow-size 0 $great-semantic-border-focus-button-border;
    }

    &:focus:active {
        background: $great-semantic-interaction-focus;
        border: $great-button-border-width solid $great-semantic-border-focus-button-border;
        box-shadow: none;
        color: $great-semantic-text-focus-button-label-focus;
    }
}

// Mixin for warning and transactional button shared styles
@mixin great-button-warning-transactional-states($bg-color, $bg-hover, $text-color, $border, $border-hover) {
    @include great-button-states($bg-color, $bg-hover, $text-color, $border, $border-hover);

    &:active:not(:focus),
    &:focus:hover,
    &:hover {
        border: $great-button-border-width solid transparent;
        border-bottom: none;
    }

    &:hover,
    &:focus:hover {
        box-shadow: 0 $great-button-shadow-size 0 $border-hover;
    }
}

// Placeholder for primary button styles
%great-button-primary {
    @include great-button-states(
        $great-semantic-interaction-default-primary-button,
        $great-semantic-interaction-hover-primary-button,
        $great-semantic-text-default-primary-button-label,
        $great-semantic-border-default-primary-button-border,
        $great-semantic-border-hover-primary-button-border
    );
}

// Placeholder for secondary button styles
%great-button-secondary {
    @include great-button-states(
        $great-semantic-interaction-default-secondary-button,
        $great-semantic-interaction-hover-secondary-button,
        $great-semantic-text-default-secondary-button-label,
        $great-semantic-border-default-secondary-button-border,
        $great-semantic-border-hover-secondary-button-border,
        true
    );

    &:hover,
    &:focus:hover {
        border: $great-button-border-width solid $great-semantic-border-hover-secondary-button-border;
        border-bottom: none;
    }
}

// Placeholder for warning button styles
%great-button-warning {
    @include great-button-warning-transactional-states(
        $great-semantic-interaction-default-error,
        $great-semantic-interaction-hover-error,
        $great-semantic-text-default-error-button-label,
        $great-semantic-border-default-error-button-border,
        $great-semantic-border-hover-error-border
    );
}

// Placeholder for transactional button styles
%great-button-transactional {
    @include great-button-warning-transactional-states(
        $great-semantic-interaction-default-success,
        $great-semantic-interaction-hover-success,
        $great-semantic-text-default-success-button-label,
        $great-semantic-border-default-success-button-border,
        $great-semantic-border-hover-success-border
    );
}

// Placeholder for CTA button styles
%great-button-cta {
    display: inline-flex;
    min-height: auto;
    justify-content: center;

    .great-icon--svg {
        margin-left: 10px;
        vertical-align: middle;
        flex-shrink: 0;
        align-self: center;
    }
}

// Placeholder for icon button styles
%great-button-icon {
    display: inline-flex;
    min-height: auto;
    justify-content: center;
    align-items: center;
    padding: $great-button-icon-padding;

    .great-icon--svg {
        vertical-align: middle;
        flex-shrink: 0;
        align-self: center;
    }

    &:focus {
        z-index: 2;
    }
}

// Placeholder for icon button prefix styles
%great-button-icon-prefix {
    .great-icon--svg {
       margin-right: 10px;
    }
}

// Placeholder for icon button suffix styles
%great-button-icon-suffix {
    .great-icon--svg {
       margin-left: 10px;
    }
}

// Placeholder for inverted button styles
%great-button-inverted {
    @include great-button-states(
        transparent,
        $great-semantic-interaction-hover-primary-button,
        $great-semantic-surface-background-white,
        $great-semantic-surface-background-white,
        $great-semantic-surface-background-white,
        true,
        true
    );
    margin-bottom: 0;
    font-family: $great-type-family-great;
}

// Placeholder for icon inline styles
%great-button-inline {
    padding: $great-button-inline-padding;
}

// Placeholder for search button styles
%great-button-search {
    margin: 0 0 0 -2px;
    height: 54px;
    width: 60px;
    box-shadow: none;

    &:focus {
        border: none !important;
        box-shadow: none !important;
        outline: 1px solid $great-semantic-border-focus-button-border !important;
    }
}

// Placeholder for full width button styles
%great-button-full-width {
    width: 100%;
}

// Placeholder for auto width button styles
%great-button-auto-width {
    width: auto;
}


// Base button styles
.great-button {
    @extend %great-button-base;
    @extend %great-button-primary;
}

// Secondary button styles
.great-button--secondary {
    @extend %great-button-base;
    @extend %great-button-secondary;
}

// Warning button styles
.great-button--warning {
    @extend %great-button-base;
    @extend %great-button-warning;
}

// Transactional button styles
.great-button--transactional {
    @extend %great-button-base;
    @extend %great-button-transactional;
}

// CTA button styles
.great-button--cta {
    @extend %great-button-base;
    @extend %great-button-secondary;
    @extend %great-button-cta;
}

// Inline button styles
.great-button--inline {
    @extend %great-button-base;
    @extend %great-button-inline;
}

// Toggle button styles
.great-button--toggle {
    @extend %great-button-base;
    @extend %great-button-secondary;
    @extend %great-button-inline;
}

// Inverted button styles
.great-button--inverted {
    @extend %great-button-base;
    @extend %great-button-inverted;
}

// Icon button styles
.great-button--icon {
    @extend %great-button-base;
    @extend %great-button-icon;
}

// Icon prefix button styles
.great-button--icon-prefix {
    @extend %great-button-base;
    @extend %great-button-icon-prefix;
}

// Icon suffix button styles
.great-button--icon-suffix {
    @extend %great-button-base;
    @extend %great-button-icon-suffix;
}

// Full width button styles
.great-button--full-width {
    @extend %great-button-base;
    @extend %great-button-full-width;
}

// Auto width button styles
.great-button--auto-width {
    @extend %great-button-base;
    @extend %great-button-auto-width;
}

// Search (with inline input) button styles
.great-button--search {
    @extend %great-button-base;
    @extend %great-button-search;
}